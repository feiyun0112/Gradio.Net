import"./Index-C_XES7MU.js";import{B as he}from"./BlockLabel-B4vIIOBx.js";import{E as we}from"./Empty-kwE6l5yz.js";import{F as le}from"./File-BQ_9P3Ye.js";import{U as ke}from"./ModifyUpload.svelte_svelte_type_style_lang-DFwl17Pq.js";import{M as pe}from"./ModifyUpload-ErnQGHFf.js";import{D as ve}from"./DownloadLink-a6tDpFhv.js";const ne=i=>{let e=["B","KB","MB","GB","PB"],l=0;for(;i>1024;)i/=1024,l++;let t=e[l];return i.toFixed(1)+"&nbsp;"+t},{HtmlTag:$e,SvelteComponent:ye,append:w,attr:k,check_outros:me,create_component:ze,destroy_component:qe,detach:P,element:F,ensure_array_like:ie,flush:T,group_outros:ge,init:Fe,insert:I,listen:Z,mount_component:Be,noop:se,outro_and_destroy_block:Ce,run_all:Ee,safe_not_equal:Ae,set_data:x,set_style:oe,space:G,text:H,toggle_class:ae,transition_in:K,transition_out:O,update_keyed_each:De}=window.__gradio__svelte__internal,{createEventDispatcher:Se}=window.__gradio__svelte__internal;function re(i,e,l){const t=i.slice();return t[11]=e[l],t[13]=l,t}function Ue(i){let e=i[2]("file.uploading")+"",l;return{c(){l=H(e)},m(t,n){I(t,l,n)},p(t,n){n&4&&e!==(e=t[2]("file.uploading")+"")&&x(l,e)},i:se,o:se,d(t){t&&P(l)}}}function Me(i){let e,l;return e=new ve({props:{href:i[11].url,download:window.__is_colab__?null:i[11].orig_name,$$slots:{default:[Pe]},$$scope:{ctx:i}}}),{c(){ze(e.$$.fragment)},m(t,n){Be(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.href=t[11].url),n&8&&(s.download=window.__is_colab__?null:t[11].orig_name),n&16392&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(K(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){qe(e,t)}}}function Pe(i){let e,l=(i[11].size!=null?ne(i[11].size):"(size unknown)")+"",t;return{c(){e=new $e(!1),t=H(" ⇣"),e.a=t},m(n,s){e.m(l,n,s),I(n,t,s)},p(n,s){s&8&&l!==(l=(n[11].size!=null?ne(n[11].size):"(size unknown)")+"")&&e.p(l)},d(n){n&&(e.d(),P(t))}}}function ue(i){let e,l,t,n;function s(){return i[7](i[13])}function a(..._){return i[8](i[13],..._)}return{c(){e=F("td"),l=F("button"),l.textContent="×",k(l,"class","label-clear-button svelte-18wv37q"),k(l,"aria-label","Remove this file"),k(e,"class","svelte-18wv37q")},m(_,c){I(_,e,c),w(e,l),t||(n=[Z(l,"click",s),Z(l,"keydown",a)],t=!0)},p(_,c){i=_},d(_){_&&P(e),t=!1,Ee(n)}}}function _e(i,e){let l,t,n,s=e[11].filename_stem+"",a,_,c,r=e[11].filename_ext+"",u,o,m,b,f,g,$,D,y,B,C;const L=[Me,Ue],z=[];function N(v,q){return v[11].url?0:1}f=N(e),g=z[f]=L[f](e);let d=e[3].length>1&&ue(e);function h(...v){return e[9](e[13],...v)}return{key:i,first:null,c(){l=F("tr"),t=F("td"),n=F("span"),a=H(s),_=G(),c=F("span"),u=H(r),m=G(),b=F("td"),g.c(),$=G(),d&&d.c(),D=G(),k(n,"class","stem svelte-18wv37q"),k(c,"class","ext svelte-18wv37q"),k(t,"class","filename svelte-18wv37q"),k(t,"aria-label",o=e[11].orig_name),k(b,"class","download svelte-18wv37q"),k(l,"class","file svelte-18wv37q"),ae(l,"selectable",e[0]),this.first=l},m(v,q){I(v,l,q),w(l,t),w(t,n),w(n,a),w(t,_),w(t,c),w(c,u),w(l,m),w(l,b),z[f].m(b,null),w(l,$),d&&d.m(l,null),w(l,D),y=!0,B||(C=Z(l,"click",h),B=!0)},p(v,q){e=v,(!y||q&8)&&s!==(s=e[11].filename_stem+"")&&x(a,s),(!y||q&8)&&r!==(r=e[11].filename_ext+"")&&x(u,r),(!y||q&8&&o!==(o=e[11].orig_name))&&k(t,"aria-label",o);let X=f;f=N(e),f===X?z[f].p(e,q):(ge(),O(z[X],1,1,()=>{z[X]=null}),me(),g=z[f],g?g.p(e,q):(g=z[f]=L[f](e),g.c()),K(g,1),g.m(b,null)),e[3].length>1?d?d.p(e,q):(d=ue(e),d.c(),d.m(l,D)):d&&(d.d(1),d=null),(!y||q&1)&&ae(l,"selectable",e[0])},i(v){y||(K(g),y=!0)},o(v){O(g),y=!1},d(v){v&&P(l),z[f].d(),d&&d.d(),B=!1,C()}}}function Ie(i){let e,l,t,n=[],s=new Map,a,_=ie(i[3]);const c=r=>r[11];for(let r=0;r<_.length;r+=1){let u=re(i,_,r),o=c(u);s.set(o,n[r]=_e(o,u))}return{c(){e=F("div"),l=F("table"),t=F("tbody");for(let r=0;r<n.length;r+=1)n[r].c();k(t,"class","svelte-18wv37q"),k(l,"class","file-preview svelte-18wv37q"),k(e,"class","file-preview-holder svelte-18wv37q"),oe(e,"max-height",typeof i[1]===void 0?"auto":i[1]+"px")},m(r,u){I(r,e,u),w(e,l),w(l,t);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,null);a=!0},p(r,[u]){u&61&&(_=ie(r[3]),ge(),n=De(n,u,c,1,r,_,s,t,Ce,_e,null,re),me()),(!a||u&2)&&oe(e,"max-height",typeof r[1]===void 0?"auto":r[1]+"px")},i(r){if(!a){for(let u=0;u<_.length;u+=1)K(n[u]);a=!0}},o(r){for(let u=0;u<n.length;u+=1)O(n[u]);a=!1},d(r){r&&P(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Le(i){const e=i.lastIndexOf(".");return e===-1?[i,""]:[i.slice(0,e),i.slice(e)]}function Ne(i,e,l){let t;const n=Se();let{value:s}=e,{selectable:a=!1}=e,{height:_=void 0}=e,{i18n:c}=e;function r(f,g){const $=f.currentTarget;(f.target===$||f.composedPath().includes($.firstElementChild))&&n("select",{value:t[g].orig_name,index:g})}function u(f){t.splice(f,1),l(3,t=[...t]),l(6,s=t),n("change",t)}const o=f=>{u(f)},m=(f,g)=>{g.key==="Enter"&&u(f)},b=(f,g)=>{r(g,f)};return i.$$set=f=>{"value"in f&&l(6,s=f.value),"selectable"in f&&l(0,a=f.selectable),"height"in f&&l(1,_=f.height),"i18n"in f&&l(2,c=f.i18n)},i.$$.update=()=>{i.$$.dirty&64&&l(3,t=(Array.isArray(s)?s:[s]).map(f=>{const[g,$]=Le(f.orig_name??"");return{...f,filename_stem:g,filename_ext:$}}))},[a,_,c,t,r,u,s,o,m,b]}class Te extends ye{constructor(e){super(),Fe(this,e,Ne,Ie,Ae,{value:6,selectable:0,height:1,i18n:2})}get value(){return this.$$.ctx[6]}set value(e){this.$$set({value:e}),T()}get selectable(){return this.$$.ctx[0]}set selectable(e){this.$$set({selectable:e}),T()}get height(){return this.$$.ctx[1]}set height(e){this.$$set({height:e}),T()}get i18n(){return this.$$.ctx[2]}set i18n(e){this.$$set({i18n:e}),T()}}const be=Te,{SvelteComponent:Ge,bubble:He,check_outros:Ke,create_component:Q,destroy_component:V,detach:fe,empty:Oe,flush:S,group_outros:Re,init:je,insert:ce,mount_component:W,safe_not_equal:Je,space:Qe,transition_in:U,transition_out:M}=window.__gradio__svelte__internal;function Ve(i){let e,l;return e=new we({props:{unpadded_box:!0,size:"large",$$slots:{default:[Xe]},$$scope:{ctx:i}}}),{c(){Q(e.$$.fragment)},m(t,n){W(e,t,n),l=!0},p(t,n){const s={};n&128&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(U(e.$$.fragment,t),l=!0)},o(t){M(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function We(i){let e,l;return e=new be({props:{i18n:i[5],selectable:i[3],value:i[0],height:i[4]}}),e.$on("select",i[6]),{c(){Q(e.$$.fragment)},m(t,n){W(e,t,n),l=!0},p(t,n){const s={};n&32&&(s.i18n=t[5]),n&8&&(s.selectable=t[3]),n&1&&(s.value=t[0]),n&16&&(s.height=t[4]),e.$set(s)},i(t){l||(U(e.$$.fragment,t),l=!0)},o(t){M(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function Xe(i){let e,l;return e=new le({}),{c(){Q(e.$$.fragment)},m(t,n){W(e,t,n),l=!0},i(t){l||(U(e.$$.fragment,t),l=!0)},o(t){M(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function Ye(i){let e,l,t,n,s,a,_;e=new he({props:{show_label:i[2],float:i[0]===null,Icon:le,label:i[1]||"File"}});const c=[We,Ve],r=[];function u(o,m){return m&1&&(t=null),t==null&&(t=!!(o[0]&&(!Array.isArray(o[0])||o[0].length>0))),t?0:1}return n=u(i,-1),s=r[n]=c[n](i),{c(){Q(e.$$.fragment),l=Qe(),s.c(),a=Oe()},m(o,m){W(e,o,m),ce(o,l,m),r[n].m(o,m),ce(o,a,m),_=!0},p(o,[m]){const b={};m&4&&(b.show_label=o[2]),m&1&&(b.float=o[0]===null),m&2&&(b.label=o[1]||"File"),e.$set(b);let f=n;n=u(o,m),n===f?r[n].p(o,m):(Re(),M(r[f],1,1,()=>{r[f]=null}),Ke(),s=r[n],s?s.p(o,m):(s=r[n]=c[n](o),s.c()),U(s,1),s.m(a.parentNode,a))},i(o){_||(U(e.$$.fragment,o),U(s),_=!0)},o(o){M(e.$$.fragment,o),M(s),_=!1},d(o){o&&(fe(l),fe(a)),V(e,o),r[n].d(o)}}}function Ze(i,e,l){let{value:t=null}=e,{label:n}=e,{show_label:s=!0}=e,{selectable:a=!1}=e,{height:_=void 0}=e,{i18n:c}=e;function r(u){He.call(this,i,u)}return i.$$set=u=>{"value"in u&&l(0,t=u.value),"label"in u&&l(1,n=u.label),"show_label"in u&&l(2,s=u.show_label),"selectable"in u&&l(3,a=u.selectable),"height"in u&&l(4,_=u.height),"i18n"in u&&l(5,c=u.i18n)},[t,n,s,a,_,c,r]}class xe extends Ge{constructor(e){super(),je(this,e,Ze,Ye,Je,{value:0,label:1,show_label:2,selectable:3,height:4,i18n:5})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),S()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),S()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),S()}get selectable(){return this.$$.ctx[3]}set selectable(e){this.$$set({selectable:e}),S()}get height(){return this.$$.ctx[4]}set height(e){this.$$set({height:e}),S()}get i18n(){return this.$$.ctx[5]}set i18n(e){this.$$set({i18n:e}),S()}}const Ct=xe,{SvelteComponent:et,add_flush_callback:tt,bind:lt,binding_callbacks:nt,bubble:Y,check_outros:it,create_component:R,create_slot:st,destroy_component:j,detach:ee,empty:ot,flush:p,get_all_dirty_from_scope:at,get_slot_changes:rt,group_outros:ut,init:_t,insert:te,mount_component:J,safe_not_equal:ft,space:de,transition_in:E,transition_out:A,update_slot_base:ct}=window.__gradio__svelte__internal,{createEventDispatcher:ht,tick:mt}=window.__gradio__svelte__internal;function gt(i){let e,l,t;function n(a){i[18](a)}let s={filetype:i[4],file_count:i[3],max_file_size:i[9],root:i[6],stream_handler:i[11],upload:i[10],$$slots:{default:[dt]},$$scope:{ctx:i}};return i[12]!==void 0&&(s.dragging=i[12]),e=new ke({props:s}),nt.push(()=>lt(e,"dragging",n)),e.$on("load",i[13]),e.$on("error",i[19]),{c(){R(e.$$.fragment)},m(a,_){J(e,a,_),t=!0},p(a,_){const c={};_&16&&(c.filetype=a[4]),_&8&&(c.file_count=a[3]),_&512&&(c.max_file_size=a[9]),_&64&&(c.root=a[6]),_&2048&&(c.stream_handler=a[11]),_&1024&&(c.upload=a[10]),_&1048576&&(c.$$scope={dirty:_,ctx:a}),!l&&_&4096&&(l=!0,c.dragging=a[12],tt(()=>l=!1)),e.$set(c)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){A(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}function bt(i){let e,l,t,n;return e=new pe({props:{i18n:i[8],absolute:!0}}),e.$on("clear",i[14]),t=new be({props:{i18n:i[8],selectable:i[5],value:i[0],height:i[7]}}),t.$on("select",i[16]),t.$on("change",i[17]),{c(){R(e.$$.fragment),l=de(),R(t.$$.fragment)},m(s,a){J(e,s,a),te(s,l,a),J(t,s,a),n=!0},p(s,a){const _={};a&256&&(_.i18n=s[8]),e.$set(_);const c={};a&256&&(c.i18n=s[8]),a&32&&(c.selectable=s[5]),a&1&&(c.value=s[0]),a&128&&(c.height=s[7]),t.$set(c)},i(s){n||(E(e.$$.fragment,s),E(t.$$.fragment,s),n=!0)},o(s){A(e.$$.fragment,s),A(t.$$.fragment,s),n=!1},d(s){s&&ee(l),j(e,s),j(t,s)}}}function dt(i){let e;const l=i[15].default,t=st(l,i,i[20],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&1048576)&&ct(t,l,n,n[20],e?rt(l,n[20],s,null):at(n[20]),null)},i(n){e||(E(t,n),e=!0)},o(n){A(t,n),e=!1},d(n){t&&t.d(n)}}}function wt(i){let e,l,t,n,s,a,_;e=new he({props:{show_label:i[2],Icon:le,float:i[0]===null,label:i[1]||"File"}});const c=[bt,gt],r=[];function u(o,m){return m&1&&(t=null),t==null&&(t=!!(o[0]&&(!Array.isArray(o[0])||o[0].length>0))),t?0:1}return n=u(i,-1),s=r[n]=c[n](i),{c(){R(e.$$.fragment),l=de(),s.c(),a=ot()},m(o,m){J(e,o,m),te(o,l,m),r[n].m(o,m),te(o,a,m),_=!0},p(o,[m]){const b={};m&4&&(b.show_label=o[2]),m&1&&(b.float=o[0]===null),m&2&&(b.label=o[1]||"File"),e.$set(b);let f=n;n=u(o,m),n===f?r[n].p(o,m):(ut(),A(r[f],1,1,()=>{r[f]=null}),it(),s=r[n],s?s.p(o,m):(s=r[n]=c[n](o),s.c()),E(s,1),s.m(a.parentNode,a))},i(o){_||(E(e.$$.fragment,o),E(s),_=!0)},o(o){A(e.$$.fragment,o),A(s),_=!1},d(o){o&&(ee(l),ee(a)),j(e,o),r[n].d(o)}}}function kt(i,e,l){let{$$slots:t={},$$scope:n}=e,{value:s}=e,{label:a}=e,{show_label:_=!0}=e,{file_count:c="single"}=e,{file_types:r=null}=e,{selectable:u=!1}=e,{root:o}=e,{height:m=void 0}=e,{i18n:b}=e,{max_file_size:f=null}=e,{upload:g}=e,{stream_handler:$}=e;async function D({detail:h}){l(0,s=h),await mt(),B("change",s),B("upload",h)}function y(){l(0,s=null),B("change",null),B("clear")}const B=ht();let C=!1;function L(h){Y.call(this,i,h)}function z(h){Y.call(this,i,h)}function N(h){C=h,l(12,C)}function d(h){Y.call(this,i,h)}return i.$$set=h=>{"value"in h&&l(0,s=h.value),"label"in h&&l(1,a=h.label),"show_label"in h&&l(2,_=h.show_label),"file_count"in h&&l(3,c=h.file_count),"file_types"in h&&l(4,r=h.file_types),"selectable"in h&&l(5,u=h.selectable),"root"in h&&l(6,o=h.root),"height"in h&&l(7,m=h.height),"i18n"in h&&l(8,b=h.i18n),"max_file_size"in h&&l(9,f=h.max_file_size),"upload"in h&&l(10,g=h.upload),"stream_handler"in h&&l(11,$=h.stream_handler),"$$scope"in h&&l(20,n=h.$$scope)},i.$$.update=()=>{i.$$.dirty&4096&&B("drag",C)},[s,a,_,c,r,u,o,m,b,f,g,$,C,D,y,t,L,z,N,d,n]}class pt extends et{constructor(e){super(),_t(this,e,kt,wt,ft,{value:0,label:1,show_label:2,file_count:3,file_types:4,selectable:5,root:6,height:7,i18n:8,max_file_size:9,upload:10,stream_handler:11})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),p()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),p()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),p()}get file_count(){return this.$$.ctx[3]}set file_count(e){this.$$set({file_count:e}),p()}get file_types(){return this.$$.ctx[4]}set file_types(e){this.$$set({file_types:e}),p()}get selectable(){return this.$$.ctx[5]}set selectable(e){this.$$set({selectable:e}),p()}get root(){return this.$$.ctx[6]}set root(e){this.$$set({root:e}),p()}get height(){return this.$$.ctx[7]}set height(e){this.$$set({height:e}),p()}get i18n(){return this.$$.ctx[8]}set i18n(e){this.$$set({i18n:e}),p()}get max_file_size(){return this.$$.ctx[9]}set max_file_size(e){this.$$set({max_file_size:e}),p()}get upload(){return this.$$.ctx[10]}set upload(e){this.$$set({upload:e}),p()}get stream_handler(){return this.$$.ctx[11]}set stream_handler(e){this.$$set({stream_handler:e}),p()}}const Et=pt;export{Et as B,Ct as F,be as a};
//# sourceMappingURL=FileUpload-B5qH4dU9.js.map
